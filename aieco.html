<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EcoMentor AI â€” SustainX</title>
<link href="https://fonts.googleapis.com/css2?family=Space+Mono:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500;600&family=Syne:wght@700;800&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}

:root{
  --g:  #00d9a3;
  --g2: #00b8f0;
  --p:  #a78bfa;
  --c:  #ff6b9d;
  --bg: #080d13;
  --bg2:#0d1520;
  --txt:#e8f4f0;
  --dim:#4a6a5a;
  --mid:#7aa090;
}

html,body{height:100%;overflow:hidden}

body{
  font-family:'DM Sans',sans-serif;
  background:var(--bg);
  color:var(--txt);
  display:flex;
  flex-direction:column;
}

/* â”€â”€ ANIMATED GRID BG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.grid-bg{
  position:fixed;inset:0;pointer-events:none;z-index:0;
  background-image:
    linear-gradient(rgba(0,217,163,.035) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,217,163,.035) 1px, transparent 1px);
  background-size:48px 48px;
  animation:gridScroll 25s linear infinite;
}
@keyframes gridScroll{from{background-position:0 0}to{background-position:48px 48px}}

/* â”€â”€ NEBULA BLOBS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.blob{position:fixed;border-radius:50%;filter:blur(100px);pointer-events:none;z-index:0}
.b1{width:500px;height:500px;background:rgba(0,217,163,.055);top:-15%;left:-10%;animation:blobDrift1 18s ease-in-out infinite}
.b2{width:400px;height:400px;background:rgba(0,184,240,.04);bottom:-10%;right:-10%;animation:blobDrift2 22s ease-in-out infinite}
.b3{width:300px;height:300px;background:rgba(167,139,250,.035);top:40%;left:60%;animation:blobDrift3 14s ease-in-out infinite}
@keyframes blobDrift1{0%,100%{transform:translate(0,0)}50%{transform:translate(30px,-20px)}}
@keyframes blobDrift2{0%,100%{transform:translate(0,0)}50%{transform:translate(-25px,30px)}}
@keyframes blobDrift3{0%,100%{transform:translate(0,0)}50%{transform:translate(15px,-25px)}}

/* â”€â”€ TOPBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.topbar{
  position:relative;z-index:10;
  flex-shrink:0;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 2rem;height:60px;
  background:rgba(8,13,19,.85);
  border-bottom:1px solid rgba(0,217,163,.1);
  backdrop-filter:blur(24px);
}

.back-btn{
  display:flex;align-items:center;gap:8px;
  font-family:'Space Mono',monospace;font-size:.65rem;
  color:var(--dim);letter-spacing:1px;text-transform:uppercase;
  text-decoration:none;
  background:rgba(0,217,163,.04);
  border:1px solid rgba(0,217,163,.1);
  border-radius:8px;padding:.4rem .9rem;
  transition:all .2s;cursor:pointer;
}
.back-btn:hover{color:var(--g);border-color:var(--g);background:rgba(0,217,163,.08)}

.topbar-brand{
  display:flex;align-items:center;gap:10px;
  position:absolute;left:50%;transform:translateX(-50%);
}
.topbar-logo{
  width:32px;height:32px;border-radius:9px;
  background:linear-gradient(135deg,var(--g),var(--g2));
  display:flex;align-items:center;justify-content:center;font-size:15px;
  box-shadow:0 0 16px rgba(0,217,163,.45);
  animation:logoPulse 3s ease-in-out infinite;
}
@keyframes logoPulse{0%,100%{box-shadow:0 0 16px rgba(0,217,163,.4)}50%{box-shadow:0 0 32px rgba(0,217,163,.8),0 0 60px rgba(0,217,163,.2)}}
.topbar-name{
  font-family:'Syne',sans-serif;font-size:1.1rem;font-weight:800;
  background:linear-gradient(90deg,var(--g),var(--g2));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  letter-spacing:.5px;
}

.status-pill{
  display:flex;align-items:center;gap:7px;
  font-family:'Space Mono',monospace;font-size:.6rem;
  color:var(--g);letter-spacing:1.5px;text-transform:uppercase;
  background:rgba(0,217,163,.07);
  border:1px solid rgba(0,217,163,.15);
  border-radius:20px;padding:.35rem .9rem;
}
.s-dot{width:6px;height:6px;border-radius:50%;background:var(--g);animation:sdot 1.6s steps(1) infinite}
@keyframes sdot{0%,100%{opacity:1}50%{opacity:0}}

/* â”€â”€ MAIN LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.layout{
  position:relative;z-index:1;
  flex:1;display:flex;
  overflow:hidden;
  min-height:0;
}

/* â”€â”€ LEFT SIDEBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.sidebar{
  width:300px;flex-shrink:0;
  display:flex;flex-direction:column;
  padding:1.8rem 1.4rem;
  border-right:1px solid rgba(0,217,163,.07);
  background:rgba(8,13,19,.5);
  overflow-y:auto;
  gap:1.6rem;
}
.sidebar::-webkit-scrollbar{width:3px}
.sidebar::-webkit-scrollbar-thumb{background:rgba(0,217,163,.15);border-radius:4px}

.sidebar-section-label{
  font-family:'Space Mono',monospace;font-size:.58rem;
  color:var(--dim);letter-spacing:3px;text-transform:uppercase;
  margin-bottom:.8rem;
}

/* Bot identity card */
.bot-identity{
  background:rgba(0,217,163,.04);
  border:1px solid rgba(0,217,163,.1);
  border-radius:16px;padding:1.4rem;
  display:flex;flex-direction:column;align-items:center;gap:.8rem;
  text-align:center;
  position:relative;overflow:hidden;
}
.bot-identity::before{
  content:'';position:absolute;inset:0;
  background:radial-gradient(ellipse at 50% 0%,rgba(0,217,163,.06),transparent 60%);
  pointer-events:none;
}
.bot-orb{
  width:68px;height:68px;border-radius:20px;
  background:linear-gradient(135deg,var(--g),var(--g2));
  display:flex;align-items:center;justify-content:center;font-size:30px;
  box-shadow:0 0 30px rgba(0,217,163,.5),0 0 60px rgba(0,217,163,.15);
  animation:orbBreath 4s ease-in-out infinite;position:relative;
}
@keyframes orbBreath{0%,100%{transform:scale(1)}50%{transform:scale(1.06)}}
.bot-orb::after{
  content:'';position:absolute;inset:-6px;border-radius:26px;
  border:1px solid rgba(0,217,163,.25);
  animation:orbRing 4s ease-in-out infinite;
}
@keyframes orbRing{0%,100%{transform:scale(1);opacity:.6}50%{transform:scale(1.1);opacity:.2}}

.bot-id-name{
  font-family:'Syne',sans-serif;font-size:1rem;font-weight:800;
  background:linear-gradient(90deg,var(--g),var(--g2));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.bot-id-role{
  font-family:'Space Mono',monospace;font-size:.6rem;
  color:var(--dim);letter-spacing:1.5px;line-height:1.6;
}

/* Capability tags */
.caps{display:flex;flex-direction:column;gap:.5rem}
.cap{
  display:flex;align-items:center;gap:9px;
  font-size:.8rem;color:var(--mid);
  padding:.5rem .7rem;
  border-radius:9px;
  background:rgba(0,217,163,.03);
  border:1px solid rgba(0,217,163,.07);
  transition:all .2s;
}
.cap:hover{background:rgba(0,217,163,.07);border-color:rgba(0,217,163,.15);color:var(--txt)}
.cap-icon{font-size:1rem;flex-shrink:0}

/* Stats row */
.stat-row{display:flex;gap:.6rem}
.s-stat{
  flex:1;text-align:center;
  background:rgba(0,217,163,.03);border:1px solid rgba(0,217,163,.07);
  border-radius:10px;padding:.7rem .4rem;
}
.s-stat-val{
  font-family:'Syne',sans-serif;font-size:1.1rem;font-weight:800;
  background:linear-gradient(135deg,var(--g),var(--g2));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.s-stat-lbl{font-family:'Space Mono',monospace;font-size:.5rem;color:var(--dim);letter-spacing:1px;margin-top:2px}

/* Quick topics */
.topics{display:flex;flex-direction:column;gap:.5rem}
.topic{
  display:flex;align-items:center;gap:9px;
  font-size:.82rem;color:var(--mid);
  padding:.6rem .9rem;border-radius:10px;
  border:1px solid transparent;
  cursor:pointer;transition:all .2s;
}
.topic:hover{
  background:rgba(0,217,163,.06);
  border-color:rgba(0,217,163,.15);
  color:var(--g);transform:translateX(4px);
}
.topic-emoji{font-size:1rem}

/* Model badge */
.model-badge{
  margin-top:auto;
  display:flex;align-items:center;gap:8px;
  font-family:'Space Mono',monospace;font-size:.58rem;
  color:var(--dim);letter-spacing:1px;
  padding:.7rem;border-radius:10px;
  background:rgba(0,217,163,.03);border:1px solid rgba(0,217,163,.07);
}
.model-dot{width:5px;height:5px;border-radius:50%;background:var(--g);flex-shrink:0}

/* â”€â”€ MAIN CHAT AREA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.chat-area{
  flex:1;display:flex;flex-direction:column;min-width:0;
  background:rgba(8,13,19,.4);
}

/* Chat header */
.chat-header{
  flex-shrink:0;
  display:flex;align-items:center;justify-content:space-between;
  padding:.9rem 1.8rem;
  border-bottom:1px solid rgba(0,217,163,.07);
  background:rgba(8,13,19,.6);
  backdrop-filter:blur(16px);
}
.ch-left{display:flex;align-items:center;gap:10px}
.ch-avatar{
  width:34px;height:34px;border-radius:10px;
  background:linear-gradient(135deg,var(--g),var(--g2));
  display:flex;align-items:center;justify-content:center;font-size:16px;
  box-shadow:0 0 14px rgba(0,217,163,.4);
}
.ch-name{font-family:'Syne',sans-serif;font-size:.95rem;font-weight:700;color:var(--txt)}
.ch-status{
  font-family:'Space Mono',monospace;font-size:.58rem;
  color:var(--dim);letter-spacing:1px;margin-top:1px;
}
.ch-right{display:flex;align-items:center;gap:10px}
.clear-btn{
  font-family:'Space Mono',monospace;font-size:.58rem;letter-spacing:1px;
  background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);
  border-radius:8px;color:var(--dim);
  padding:.35rem .8rem;cursor:pointer;transition:all .2s;text-transform:uppercase;
}
.clear-btn:hover{background:rgba(255,255,255,.07);color:var(--txt)}
.wdots{display:flex;gap:5px}
.wd{width:10px;height:10px;border-radius:50%}
.wd1{background:#ff5f56}.wd2{background:#ffbd2e}.wd3{background:#27c93f}

/* Messages */
.messages{
  flex:1;overflow-y:auto;
  padding:1.6rem 2rem;
  display:flex;flex-direction:column;gap:1.2rem;
  scrollbar-width:thin;scrollbar-color:rgba(0,217,163,.15) transparent;
}
.messages::-webkit-scrollbar{width:4px}
.messages::-webkit-scrollbar-thumb{background:rgba(0,217,163,.2);border-radius:4px}

.msg-row{display:flex;gap:10px;animation:msgIn .3s cubic-bezier(.17,.67,.83,.67)}
.msg-row.user{flex-direction:row-reverse}
@keyframes msgIn{from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}

.msg-av{
  width:32px;height:32px;border-radius:10px;flex-shrink:0;
  display:flex;align-items:center;justify-content:center;font-size:14px;
  margin-top:2px;
}
.msg-av.bot{background:linear-gradient(135deg,var(--g),var(--g2));box-shadow:0 0 12px rgba(0,217,163,.3)}
.msg-av.usr{background:rgba(167,139,250,.2);border:1px solid rgba(167,139,250,.3)}

.bubble{
  max-width:72%;padding:.9rem 1.2rem;
  border-radius:18px;font-size:.9rem;line-height:1.8;
}
.bubble.bot{
  background:rgba(0,217,163,.06);
  border:1px solid rgba(0,217,163,.12);
  color:var(--txt);border-bottom-left-radius:4px;
}
.bubble.user{
  background:linear-gradient(135deg,rgba(0,217,163,.18),rgba(0,184,240,.12));
  border:1px solid rgba(0,217,163,.2);
  color:#fff;border-bottom-right-radius:4px;font-weight:500;
}
.bubble strong{color:var(--g)}

/* Timestamp */
.msg-time{
  font-family:'Space Mono',monospace;font-size:.52rem;
  color:var(--dim);margin-top:.3rem;
  padding:0 .3rem;
}
.msg-row.user .msg-time{text-align:right}

/* Typing indicator */
.typing-row{display:flex;gap:10px;animation:msgIn .3s ease}
.typing-bubble{
  background:rgba(0,217,163,.05);border:1px solid rgba(0,217,163,.1);
  border-radius:18px;border-bottom-left-radius:4px;
  padding:.9rem 1.2rem;display:flex;gap:5px;align-items:center;
}
.td{width:7px;height:7px;border-radius:50%;background:var(--g);animation:tdAnim 1.2s infinite}
.td:nth-child(2){animation-delay:.2s}
.td:nth-child(3){animation-delay:.4s}
@keyframes tdAnim{0%,80%,100%{transform:scale(.55);opacity:.3}40%{transform:scale(1);opacity:1}}

/* â”€â”€ BOTTOM INPUT ZONE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.input-zone{
  flex-shrink:0;
  border-top:1px solid rgba(0,217,163,.08);
  background:rgba(8,13,19,.8);
  backdrop-filter:blur(20px);
  padding:1rem 2rem 1.2rem;
}

/* Quick chips */
.chips{
  display:flex;gap:.5rem;flex-wrap:wrap;margin-bottom:.9rem;
}
.chip{
  font-family:'Space Mono',monospace;font-size:.58rem;letter-spacing:.5px;
  color:var(--dim);background:rgba(0,217,163,.05);
  border:1px solid rgba(0,217,163,.12);border-radius:20px;
  padding:.28rem .75rem;cursor:pointer;transition:all .2s;
  white-space:nowrap;
}
.chip:hover{color:var(--g);border-color:var(--g);background:rgba(0,217,163,.1);transform:translateY(-1px)}

/* Input row */
.input-row{display:flex;gap:.8rem;align-items:flex-end}

.textarea-wrap{flex:1;position:relative}
.chat-input{
  width:100%;
  background:rgba(0,217,163,.04);
  border:1px solid rgba(0,217,163,.15);
  border-radius:14px;
  color:var(--txt);
  padding:.8rem 1.1rem;
  font-family:'DM Sans',sans-serif;font-size:.9rem;
  resize:none;outline:none;
  min-height:46px;max-height:120px;
  line-height:1.6;
  transition:border-color .25s, box-shadow .25s;
}
.chat-input::placeholder{color:var(--dim)}
.chat-input:focus{
  border-color:rgba(0,217,163,.4);
  box-shadow:0 0 0 3px rgba(0,217,163,.07);
}

.send-btn{
  width:46px;height:46px;border-radius:14px;border:none;flex-shrink:0;
  background:linear-gradient(135deg,var(--g),var(--g2));
  color:#080d13;cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  transition:all .25s;
  box-shadow:0 4px 20px rgba(0,217,163,.4);
}
.send-btn:hover{transform:scale(1.08);box-shadow:0 6px 28px rgba(0,217,163,.6)}
.send-btn:active{transform:scale(.96)}
.send-btn:disabled{opacity:.3;transform:none;cursor:default;box-shadow:none}

.input-hint{
  font-family:'Space Mono',monospace;font-size:.55rem;
  color:var(--dim);letter-spacing:.5px;margin-top:.5rem;
  text-align:center;
}

/* Error banner */
.error-bar{
  display:none;
  font-family:'Space Mono',monospace;font-size:.7rem;
  color:#ff8080;letter-spacing:.5px;
  background:rgba(255,80,80,.07);border:1px solid rgba(255,80,80,.2);
  border-radius:10px;padding:.6rem 1rem;margin-bottom:.7rem;
}

/* â”€â”€ WELCOME SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.welcome{
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  flex:1;padding:3rem;text-align:center;gap:1.5rem;
}
.welcome-orb{
  width:90px;height:90px;border-radius:24px;
  background:linear-gradient(135deg,var(--g),var(--g2));
  display:flex;align-items:center;justify-content:center;font-size:40px;
  box-shadow:0 0 40px rgba(0,217,163,.5),0 0 80px rgba(0,217,163,.15);
  animation:orbBreath 4s ease-in-out infinite;
  position:relative;
}
.welcome-orb::before{
  content:'';position:absolute;inset:-10px;border-radius:34px;
  border:1px solid rgba(0,217,163,.2);animation:orbRing2 4s ease-in-out infinite;
}
.welcome-orb::after{
  content:'';position:absolute;inset:-22px;border-radius:44px;
  border:1px solid rgba(0,217,163,.08);animation:orbRing2 4s ease-in-out infinite .5s;
}
@keyframes orbRing2{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.08);opacity:.3}}
.welcome-title{
  font-family:'Syne',sans-serif;font-size:1.8rem;font-weight:800;
  background:linear-gradient(90deg,var(--g),var(--g2),var(--p));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
}
.welcome-sub{
  color:var(--mid);font-size:.95rem;font-weight:300;
  max-width:420px;line-height:1.9;
}
.welcome-tags{display:flex;gap:.6rem;flex-wrap:wrap;justify-content:center}
.w-tag{
  font-family:'Space Mono',monospace;font-size:.6rem;letter-spacing:1px;
  color:var(--g);background:rgba(0,217,163,.07);
  border:1px solid rgba(0,217,163,.15);border-radius:20px;
  padding:.3rem .8rem;
}

/* â”€â”€ RESPONSIVE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media(max-width:820px){
  .sidebar{display:none}
  .chat-area{width:100%}
  .topbar{padding:0 1rem}
  .messages{padding:1.2rem 1rem}
  .input-zone{padding:.8rem 1rem 1rem}
  .chips{gap:.4rem}
}
</style>
</head>
<body>

<!-- BG LAYERS -->
<div class="grid-bg"></div>
<div class="blob b1"></div>
<div class="blob b2"></div>
<div class="blob b3"></div>

<!-- â”€â”€ TOPBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="topbar">
  <button class="back-btn" onclick="window.location.href='home.html'">
    <svg width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><polyline points="15,18 9,12 15,6"/></svg>
    Back
  </button>

  <div class="topbar-brand">
    <div class="topbar-logo">ğŸŒ¿</div>
    <div class="topbar-name">EcoMentor AI</div>
  </div>

  <div class="status-pill">
    <div class="s-dot"></div>
    <span id="topStatus">ONLINE</span>
  </div>
</div>

<!-- â”€â”€ LAYOUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<div class="layout">

  <!-- SIDEBAR -->
  <aside class="sidebar">

    <!-- Bot identity -->
    <div>
      <div class="sidebar-section-label">// AI ADVISOR</div>
      <div class="bot-identity">
        <div class="bot-orb">ğŸŒ¿</div>
        <div class="bot-id-name">ECOMENTOR</div>
        <div class="bot-id-role">SUSTAINABILITY INTELLIGENCE<br>POWERED BY CLAUDE AI</div>
      </div>
    </div>

    <!-- Capabilities -->
    <div>
      <div class="sidebar-section-label">// CAPABILITIES</div>
      <div class="caps">
        <div class="cap"><span class="cap-icon">ğŸŒ±</span>Carbon footprint reduction</div>
        <div class="cap"><span class="cap-icon">â™»ï¸</span>Waste & recycling guidance</div>
        <div class="cap"><span class="cap-icon">ğŸŒŠ</span>Ocean pollution solutions</div>
        <div class="cap"><span class="cap-icon">ğŸ¦‹</span>Wildlife conservation</div>
        <div class="cap"><span class="cap-icon">ğŸ’§</span>Water quality & saving</div>
        <div class="cap"><span class="cap-icon">ğŸŒ³</span>Deforestation & reforestation</div>
        <div class="cap"><span class="cap-icon">âš¡</span>Green energy & EVs</div>
        <div class="cap"><span class="cap-icon">ğŸƒ</span>Sustainable food systems</div>
      </div>
    </div>

    <!-- Stats -->
    <div>
      <div class="sidebar-section-label">// SESSION STATS</div>
      <div class="stat-row">
        <div class="s-stat">
          <div class="s-stat-val" id="msgCount">0</div>
          <div class="s-stat-lbl">MESSAGES</div>
        </div>
        <div class="s-stat">
          <div class="s-stat-val" id="topicCount">0</div>
          <div class="s-stat-lbl">TOPICS</div>
        </div>
      </div>
    </div>

    <!-- Quick topics -->
    <div>
      <div class="sidebar-section-label">// QUICK TOPICS</div>
      <div class="topics">
        <div class="topic" onclick="askTopic('How do I start a zero-waste lifestyle from scratch?')">
          <span class="topic-emoji">ğŸ—‘ï¸</span>Zero-Waste Lifestyle
        </div>
        <div class="topic" onclick="askTopic('What is the biggest personal impact I can have on climate change?')">
          <span class="topic-emoji">ğŸŒ¡ï¸</span>Climate Action
        </div>
        <div class="topic" onclick="askTopic('How do I properly compost at home?')">
          <span class="topic-emoji">ğŸŒ¾</span>Home Composting
        </div>
        <div class="topic" onclick="askTopic('What are the most eco-friendly ways to travel?')">
          <span class="topic-emoji">âœˆï¸</span>Sustainable Travel
        </div>
        <div class="topic" onclick="askTopic('How can my diet reduce my environmental impact?')">
          <span class="topic-emoji">ğŸ¥—</span>Sustainable Diet
        </div>
        <div class="topic" onclick="askTopic('Best ways to make my home more energy efficient?')">
          <span class="topic-emoji">ğŸ¡</span>Green Home
        </div>
      </div>
    </div>

    <!-- Model badge -->
    <div class="model-badge">
      <div class="model-dot"></div>
      <span>CLAUDE SONNET Â· SUSTAINX v2.0</span>
    </div>

  </aside>

  <!-- MAIN CHAT -->
  <div class="chat-area">

    <!-- Chat header -->
    <div class="chat-header">
      <div class="ch-left">
        <div class="ch-avatar">ğŸŒ¿</div>
        <div>
          <div class="ch-name">EcoMentor</div>
          <div class="ch-status" id="chatStatus">Your personal AI sustainability advisor</div>
        </div>
      </div>
      <div class="ch-right">
        <div class="wdots">
          <div class="wd wd1"></div><div class="wd wd2"></div><div class="wd wd3"></div>
        </div>
        <button class="clear-btn" onclick="clearChat()">Clear Chat</button>
      </div>
    </div>

    <!-- Messages OR welcome screen -->
    <div class="messages" id="messages">
      <!-- Welcome rendered by JS -->
    </div>

    <!-- Input zone -->
    <div class="input-zone">
      <div class="error-bar" id="errorBar"></div>
      <div class="chips">
        <div class="chip" onclick="sendChip('How do I reduce my carbon footprint effectively?')">âš¡ Carbon Footprint</div>
        <div class="chip" onclick="sendChip('Best ways to cut plastic waste at home?')">â™»ï¸ Plastic Waste</div>
        <div class="chip" onclick="sendChip('How can I protect local wildlife in my area?')">ğŸ¦‹ Wildlife</div>
        <div class="chip" onclick="sendChip('What causes ocean pollution and how can I help?')">ğŸŒŠ Ocean Crisis</div>
        <div class="chip" onclick="sendChip('Air quality tips for city living?')">ğŸ’¨ Air Quality</div>
        <div class="chip" onclick="sendChip('How do I start recycling properly?')">ğŸ—‘ï¸ Recycling</div>
      </div>
      <div class="input-row">
        <div class="textarea-wrap">
          <textarea
            class="chat-input"
            id="chatInput"
            placeholder="Ask EcoMentor anything about sustainability, environment, climate..."
            rows="1"
            onkeydown="handleKey(event)"
            oninput="autoResize(this)"
          ></textarea>
        </div>
        <button class="send-btn" id="sendBtn" onclick="sendMessage()">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <line x1="22" y1="2" x2="11" y2="13"/>
            <polygon points="22,2 15,22 11,13 2,9"/>
          </svg>
        </button>
      </div>
      <div class="input-hint">ENTER to send &nbsp;Â·&nbsp; SHIFT+ENTER for new line &nbsp;Â·&nbsp; Powered by Claude AI</div>
    </div>

  </div><!-- /chat-area -->
</div><!-- /layout -->

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ECOMENTOR AI â€” STANDALONE CHAT INTERFACE
   
   NOTE: This interface makes direct API calls to Anthropic's Claude.
   
   The API calls work automatically in this environment because the
   Anthropic API key is handled by the platform. 
   
   If you're testing locally in VS Code with Live Server, the API 
   calls will fail with CORS errors because:
   1. The browser blocks cross-origin requests to the Anthropic API
   2. You need to add authentication headers (API key)
   
   For local testing, you have two options:
   A) Use a backend proxy server to handle API calls
   B) Test the UI by simulating responses (mock mode)
   
   The chat UI itself (message display, typing indicators, etc.) 
   works perfectly in VS Code. Only the actual AI responses require
   the proper API setup.
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

console.log('%cğŸŒ¿ EcoMentor AI Loaded', 'color: #00d9a3; font-size: 16px; font-weight: bold;');
console.log('%cUI: Ready | Claude API: Attempting connection...', 'color: #7aa090;');

/* â”€â”€ DEMO MODE (for local testing without API) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const DEMO_MODE = true; // Set to false when you have API access

const DEMO_RESPONSES = {
  'hello': "Hey there! ğŸ‘‹ I'm EcoMentor, your personal AI sustainability advisor. I can help you with everything from reducing your carbon footprint to protecting local wildlife. What environmental topic interests you most?",
  'carbon': "Great question about carbon footprints! The average person in developed countries emits about **4-5 tons of COâ‚‚ annually**. The biggest impact comes from three areas: transportation (30%), energy use (25%), and food choices (20%). **Quick win:** Switching to renewable energy or offsetting can cut your footprint by 40% immediately. What aspect would you like to tackle first?",
  'plastic': "Ocean plastic is a massive crisis - **8 million tons** enter our oceans every year. Here's the truth: individual recycling helps, but systemic change is key. **Action plan:** (1) Cut single-use plastics - bring reusable bags, bottles, straws. (2) Support legislation for producer responsibility. (3) Join local beach cleanups. Even small actions multiply when communities act together. What's your biggest plastic challenge?",
  'recycle': "Recycling is trickier than most people think! Here's what actually works: **The Big 3** that get recycled consistently: (1) Clean cardboard & paper, (2) Glass bottles, (3) Aluminum cans. Plastics? Only types 1 & 2 (check the number on the bottom). **Pro tip:** When in doubt, throw it out - contaminated recycling ruins entire batches. Want me to break down what's recyclable in your area?",
  'wildlife': "Protecting local wildlife is incredibly impactful! Start by creating **habitat corridors** in your yard - native plants, water sources, and shelter. Avoid pesticides (they're ecosystem killers). Support local conservation orgs. Report illegal poaching or habitat destruction. **Data point:** Urban green spaces with native plants support 50% more bird species than lawns. What kind of wildlife do you see in your area?",
  'ocean': "Ocean pollution has three major culprits: (1) **Plastic waste** - 80% comes from land, (2) **Agricultural runoff** - creates dead zones, (3) **Oil & chemicals**. Solutions? Support coastal cleanups, reduce plastic use, choose sustainable seafood (look for MSC certification), and advocate for stronger marine protection laws. **Impact stat:** Every ton of plastic removed prevents harm to 100+ marine animals. Want specific actions you can take?",
  'water': "Water conservation is critical - **2 billion people** lack safe drinking water. At home: Fix leaks (1 drip/sec = 3,000 gallons/year!), install low-flow fixtures (saves 25-60% instantly), reduce shower time, run full loads only. **Garden hack:** Collect rainwater, use drip irrigation, choose native drought-resistant plants. These changes cut water use by 30-50%. Which area do you want to focus on?",
  'air': "Air quality directly impacts health - **91% of people** breathe unsafe air according to WHO. City living tips: Check AQI daily, use air purifiers with HEPA filters indoors, avoid peak traffic hours for exercise, support clean energy policies. **Plants help:** Snake plants, spider plants, and pothos filter indoor air naturally. Want to know your city's current air quality or indoor air improvement tips?",
  'food': "Food systems account for **26% of global emissions**! The big lever? Shift toward plant-based eating - even just reducing meat by 50% cuts your food footprint significantly. Other wins: Buy local & seasonal, reduce food waste (1/3 of food is wasted globally!), compost scraps. **Surprising fact:** Beef has 10x the carbon footprint of chicken, 20x that of beans. Interested in easy plant-based swaps?",
  'default': "That's a great question about **[TOPIC]**! While I'm running in demo mode right now (no live AI connection), I'm designed to give you expert sustainability advice on carbon footprints, waste reduction, ocean conservation, wildlife protection, and much more. In full mode, I'd give you detailed, science-backed answers with specific actionable steps. Want to explore one of the quick topics below?"
};

function getDemoResponse(userText) {
  const text = userText.toLowerCase();
  for (let key in DEMO_RESPONSES) {
    if (text.includes(key)) return DEMO_RESPONSES[key];
  }
  return DEMO_RESPONSES.default.replace('[TOPIC]', userText.split(' ').slice(0, 3).join(' '));
}

/* â”€â”€ SYSTEM PROMPT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const SYSTEM = `You are EcoMentor, an expert AI sustainability advisor for the SustainX platform â€” a citizen-powered environmental monitoring app.

You are brilliant, warm, and deeply passionate about the planet. You never preach or guilt-trip. You speak like a knowledgeable friend who happens to be a world-class environmental scientist.

Your expertise covers:
- Environmental science: pollution, deforestation, ocean plastics, air/water quality, climate change
- Sustainable living: carbon footprint reduction, zero-waste lifestyle, eco-friendly product choices
- Waste management: recycling systems, composting, circular economy principles
- Local environmental action: community cleanup, advocacy, reporting issues to authorities
- Climate science: key facts, feedback loops, tipping points, and real solutions
- Wildlife & biodiversity: conservation, endangered species, habitat protection
- Green energy & technology: solar, wind, EVs, energy efficiency
- Food sustainability: plant-based diets, food waste reduction, local sourcing

Response rules:
- Be direct, confident, and science-backed. Use real data and numbers when they strengthen the point.
- Keep responses focused â€” 2 to 4 short paragraphs unless the user explicitly needs a detailed breakdown.
- Use markdown bold (**text**) for emphasis on key terms or numbers.
- Use occasional emojis naturally â€” not forced.
- Always end with ONE clear, specific, actionable tip OR a sharp follow-up question.
- Speak as an expert colleague, not a customer service bot or a textbook.`;

/* â”€â”€ STATE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let history = [];
let msgCount = 0;
let topicSet = new Set();
let welcomeShown = true;

/* â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function now() {
  return new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
}

function autoResize(el) {
  el.style.height = 'auto';
  el.style.height = Math.min(el.scrollHeight, 120) + 'px';
}

function updateStats() {
  document.getElementById('msgCount').textContent = msgCount;
  document.getElementById('topicCount').textContent = topicSet.size;
}

function setStatus(text, isProcessing = false) {
  document.getElementById('chatStatus').textContent = text;
  document.getElementById('topStatus').textContent = isProcessing ? 'THINKING...' : 'ONLINE';
}

function showError(msg) {
  const el = document.getElementById('errorBar');
  el.textContent = 'âš ï¸ ' + msg;
  el.style.display = 'block';
  setTimeout(() => el.style.display = 'none', 6000);
}

/* â”€â”€ RENDER WELCOME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderWelcome() {
  const box = document.getElementById('messages');
  const modeIndicator = DEMO_MODE ? '<div class="w-tag" style="background:rgba(255,180,0,.15);border-color:rgba(255,180,0,.3);color:#ffb400">âš¡ DEMO MODE ACTIVE</div>' : '';
  box.innerHTML = `
    <div class="welcome">
      <div class="welcome-orb">ğŸŒ¿</div>
      <div class="welcome-title">Hi, I'm EcoMentor</div>
      <div class="welcome-sub">Your personal AI sustainability advisor. Ask me anything about the environment, climate, recycling, wildlife, or how to live more sustainably.</div>
      <div class="welcome-tags">
        ${modeIndicator}
        <div class="w-tag">CARBON FOOTPRINT</div>
        <div class="w-tag">OCEAN PLASTICS</div>
        <div class="w-tag">ZERO WASTE</div>
        <div class="w-tag">WILDLIFE</div>
        <div class="w-tag">GREEN ENERGY</div>
        <div class="w-tag">CLIMATE SCIENCE</div>
      </div>
    </div>`;
}

/* â”€â”€ ADD MESSAGE TO DOM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function addMessage(role, text) {
  // Remove welcome screen on first message
  if (welcomeShown) {
    document.getElementById('messages').innerHTML = '';
    welcomeShown = false;
  }

  const isBot = role === 'assistant';
  const box = document.getElementById('messages');
  
  // Create the message row
  const row = document.createElement('div');
  row.className = 'msg-row' + (isBot ? '' : ' user');

  // Escape HTML to prevent XSS
  const escaped = text
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#039;');

  // Render markdown-like bold and line breaks
  const rendered = escaped
    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
    .replace(/\n/g, '<br>');

  // Create message structure
  const msgWrapper = document.createElement('div');
  
  const avatar = document.createElement('div');
  avatar.className = `msg-av ${isBot ? 'bot' : 'usr'}`;
  avatar.textContent = isBot ? 'ğŸŒ¿' : 'ğŸ‘¤';
  
  const contentWrap = document.createElement('div');
  
  const bubble = document.createElement('div');
  bubble.className = `bubble ${isBot ? 'bot' : 'user'}`;
  bubble.innerHTML = rendered;
  
  const time = document.createElement('div');
  time.className = 'msg-time';
  time.textContent = now();
  
  contentWrap.appendChild(bubble);
  contentWrap.appendChild(time);
  
  row.appendChild(avatar);
  row.appendChild(contentWrap);
  
  box.appendChild(row);
  box.scrollTop = box.scrollHeight;

  if (!isBot) {
    msgCount++;
    // Rough topic detection
    const keywords = ['plastic','carbon','recycle','wildlife','water','air','forest','energy','food','compost','ocean','climate','waste','pollution'];
    keywords.forEach(k => { if (text.toLowerCase().includes(k)) topicSet.add(k); });
    updateStats();
  }
}

/* â”€â”€ TYPING INDICATOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function showTyping() {
  if (welcomeShown) { document.getElementById('messages').innerHTML = ''; welcomeShown = false; }
  const box = document.getElementById('messages');
  const row = document.createElement('div');
  row.className = 'typing-row'; row.id = 'typingRow';
  row.innerHTML = `
    <div class="msg-av bot">ğŸŒ¿</div>
    <div class="typing-bubble">
      <div class="td"></div><div class="td"></div><div class="td"></div>
    </div>`;
  box.appendChild(row);
  box.scrollTop = box.scrollHeight;
}

function hideTyping() {
  const el = document.getElementById('typingRow');
  if (el) el.remove();
}

/* â”€â”€ SEND MESSAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function sendMessage(override) {
  const input = document.getElementById('chatInput');
  const text = (override || input.value).trim();
  if (!text) return;

  // Clear input and disable send button
  input.value = ''; 
  input.style.height = '46px';
  document.getElementById('sendBtn').disabled = true;
  document.getElementById('errorBar').style.display = 'none';
  setStatus('EcoMentor is thinking...', true);

  // Add user message to UI immediately
  addMessage('user', text);
  
  // Add to history for API
  history.push({ role: 'user', content: text });
  
  // Show typing indicator
  showTyping();

  // DEMO MODE - simulate AI response without API call
  if (DEMO_MODE) {
    await new Promise(resolve => setTimeout(resolve, 1200)); // Simulate thinking time
    const demoReply = getDemoResponse(text);
    history.push({ role: 'assistant', content: demoReply });
    hideTyping();
    addMessage('assistant', demoReply);
    setStatus('Your personal AI sustainability advisor');
    document.getElementById('sendBtn').disabled = false;
    document.getElementById('chatInput').focus();
    return;
  }

  // REAL API CALL (only when DEMO_MODE = false)
  try {
    const res = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: { 
        'Content-Type': 'application/json',
        'anthropic-version': '2023-06-01',
        'x-api-key': 'YOUR_API_KEY_HERE' // Add your API key here when not in demo mode
      },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1000,
        system: SYSTEM,
        messages: history
      })
    });

    if (!res.ok) {
      const err = await res.json().catch(() => ({}));
      throw new Error(err?.error?.message || `API error: ${res.status} ${res.statusText}`);
    }

    const data = await res.json();
    const reply = data.content?.map(b => b.type === 'text' ? b.text : '').join('') || 'I had trouble responding â€” please try again.';

    history.push({ role: 'assistant', content: reply });
    hideTyping();
    addMessage('assistant', reply);
    setStatus('Your personal AI sustainability advisor');
  } catch (err) {
    console.error('Chat error:', err);
    hideTyping();
    showError(err.message || 'Connection failed. Enable DEMO_MODE for local testing.');
    setStatus('Your personal AI sustainability advisor');
    // Remove the failed user message from history
    history.pop();
  } finally {
    document.getElementById('sendBtn').disabled = false;
    document.getElementById('chatInput').focus();
  }
}

function sendChip(text) { sendMessage(text); }
function askTopic(text) { sendMessage(text); }

function handleKey(e) {
  if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); }
}

function clearChat() {
  history = [];
  msgCount = 0;
  topicSet.clear();
  welcomeShown = true;
  updateStats();
  renderWelcome();
  setStatus('Your personal AI sustainability advisor');
}

/* â”€â”€ BOOT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
renderWelcome();
document.getElementById('chatInput').focus();
</script>
</body>
</html>